"use strict";(self.webpackChunknew_noodl_docs=self.webpackChunknew_noodl_docs||[]).push([[1761],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),l=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=l(n),m=r,g=c["".concat(d,".").concat(m)]||c[m]||u[m]||i;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},53488:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(67294);function r(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(a){console.error("Fallback: Oops, unable to copy",a)}document.body.removeChild(t)}(e)}function i(e){return a.createElement("button",{className:"ndl-copy-nodes-button",onClick:function(){return t=e.json,void r(JSON.stringify(t));var t}})}},19626:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return g},frontMatter:function(){return d},metadata:function(){return p},toc:function(){return c}});var a=n(83117),r=n(80102),i=(n(67294),n(3905)),o=n(53488),s=["components"],d={id:"javascript",label:"Javascript in Noodl",hide_title:!0},l="Javascript in Noodl",p={unversionedId:"guides/business-logic/javascript",id:"guides/business-logic/javascript",title:"Javascript in Noodl",description:"What you will learn in this guide",source:"@site/docs/guides/business-logic/javascript.mdx",sourceDirName:"guides/business-logic",slug:"/guides/business-logic/javascript",permalink:"/2.6/docs/guides/business-logic/javascript",tags:[],version:"current",frontMatter:{id:"javascript",label:"Javascript in Noodl",hide_title:!0},sidebar:"docsSidebar",previous:{title:"Client Side Business Logic in Nodes",permalink:"/2.6/docs/guides/business-logic/client-side-biz-logic-nodes"},next:{title:"Building Business Logic Using Javascript",permalink:"/2.6/docs/guides/business-logic/client-side-biz-logic-js"}},u={},c=[{value:"What you will learn in this guide",id:"what-you-will-learn-in-this-guide",level:2},{value:"Overview",id:"overview",level:2},{value:"Using the <strong>Function</strong> node",id:"using-the-function-node",level:2},{value:"Inputs and Outputs in the Function node",id:"inputs-and-outputs-in-the-function-node",level:2},{value:"Running the <strong>Function</strong> node on change or on a signal",id:"running-the-function-node-on-change-or-on-a-signal",level:2},{value:"Sending Signals on Outputs",id:"sending-signals-on-outputs",level:2},{value:"JavaScript using the <strong>Script</strong> node",id:"javascript-using-the-script-node",level:2},{value:"The Script source file",id:"the-script-source-file",level:2},{value:"Inputs and outputs",id:"inputs-and-outputs",level:2},{value:"Input signals",id:"input-signals",level:2},{value:"Reading inputs and setting outputs",id:"reading-inputs-and-setting-outputs",level:2},{value:"Changed inputs",id:"changed-inputs",level:2},{value:"The final code",id:"the-final-code",level:2},{value:"Using script nodes",id:"using-script-nodes",level:2},{value:"Debugging",id:"debugging",level:2},{value:"Running code when a Script node is created or destroyed",id:"running-code-when-a-script-node-is-created-or-destroyed",level:3}],m={toc:c};function g(e){var t=e.components,d=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},m,d,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"javascript-in-noodl"},"Javascript in Noodl"),(0,i.kt)("h2",{id:"what-you-will-learn-in-this-guide"},"What you will learn in this guide"),(0,i.kt)("p",null,"This guide will introduce you to how to use Javascript in Noodl.\nWhile almost everything can be achieved in Noodl using Nodes,\nif you know your way around Javascript it's sometimes just more convenient to add in Javascript code directly.\nNoodl make the mix of nodes and code very easy using the ",(0,i.kt)("a",{parentName:"p",href:"/nodes/javascript/function"},"Function")," and ",(0,i.kt)("a",{parentName:"p",href:"/nodes/javascript/script"},"Script")," nodes."),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"The guide will first go through the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node,\nwhich is excellent for simple, single function, Javascript code.\nThen it will show a more extensive Javascript example using the ",(0,i.kt)("strong",{parentName:"p"},"Script")," node.\nThe two nodes can also be seen used combined in the ",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/business-logic/client-side-biz-logic-js"},"Business Logic using Javascript Guide")),(0,i.kt)("h2",{id:"using-the-function-node"},"Using the ",(0,i.kt)("strong",{parentName:"h2"},"Function")," node"),(0,i.kt)("p",null,"The easiest way to write Javascript in Noodl is using the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node.\nThere is literally no overhead at all - you just open the code editor and write code! Let's try it!"),(0,i.kt)("p",null,'Create a new project using the "Hello World" template. Add in two ',(0,i.kt)("a",{parentName:"p",href:"/nodes/ui-controls/text-input"},"Text Input"),' nodes before the text node.\nGive them the labels "First String" and "Second String". Then add in a ',(0,i.kt)("strong",{parentName:"p"},"Function"),' node. Call the function node "Merge Strings".'),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(24411).Z,width:"760",height:"429"}))),(0,i.kt)("p",null,"Now click the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node and edit the script. Paste in the Javascript below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'if (Inputs.String1 !== undefined && Inputs.String2 !== undefined) {\n  let length = Math.max(Inputs.String1.length, Inputs.String2.length);\n  let outputString = "";\n  for (let i = 0; i < length; i++) {\n    if (i < Inputs.String1.length) {\n      outputString = outputString + Inputs.String1.charAt(i);\n    }\n    if (i < Inputs.String2.length) {\n      outputString = outputString + Inputs.String2.charAt(i);\n    }\n  }\n  Outputs.MergedString = outputString;\n}\n')),(0,i.kt)("h2",{id:"inputs-and-outputs-in-the-function-node"},"Inputs and Outputs in the Function node"),(0,i.kt)("p",null,"This little function merges two strings called ",(0,i.kt)("inlineCode",{parentName:"p"},"String1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"String2"),".\nThey are declared as ",(0,i.kt)("inlineCode",{parentName:"p"},"Inputs.String1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Inputs.String2")," and will become inputs on the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node.\nYou can also declare inputs manually on the function node - if you click it you will see that you can add inputs and outputs.\nBy adding them manually you can be a bit more precise on which type an input is,\nbut generally is not needed. One reason to explicitly state type of input is for example when you connect a ",(0,i.kt)("strong",{parentName:"p"},"Function")," node to a ",(0,i.kt)("strong",{parentName:"p"},"Component Inputs"),".\nBy knowing the type Noodl can present the right control in the property of the Component."),(0,i.kt)("p",null,"There is also an output defined in the code, ",(0,i.kt)("inlineCode",{parentName:"p"},"Outputs.MergedString"),"."),(0,i.kt)("p",null,"We can now connect the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node.\nConnect the ",(0,i.kt)("strong",{parentName:"p"},"Text")," property from the ",(0,i.kt)("strong",{parentName:"p"},"Text Inputs")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"String1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"String2")," and connect the output ",(0,i.kt)("inlineCode",{parentName:"p"},"MergedString")," to the ",(0,i.kt)("strong",{parentName:"p"},"Text"),".\nNow if you start writing in the ",(0,i.kt)("strong",{parentName:"p"},"Text Fields")," you will see the two strings merged on the screen."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(37281).Z,width:"1789",height:"804"}))),(0,i.kt)("h2",{id:"running-the-function-node-on-change-or-on-a-signal"},"Running the ",(0,i.kt)("strong",{parentName:"h2"},"Function")," node on change or on a signal"),(0,i.kt)("p",null,"There are two ways to make the ",(0,i.kt)("strong",{parentName:"p"},"Function")," run."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"If ",(0,i.kt)("strong",{parentName:"li"},"Run")," signal is not connected, the ",(0,i.kt)("strong",{parentName:"li"},"Function")," will run as soon as any of its inputs are changed. This is the case with our current example."),(0,i.kt)("li",{parentName:"ol"},"If ",(0,i.kt)("strong",{parentName:"li"},"Run")," signal is connected, the ",(0,i.kt)("strong",{parentName:"li"},"Function")," will only run when triggered.")),(0,i.kt)("p",null,"Let's try to change to number two. We only want to merge the string once the user clicks a button.\nSo add a ",(0,i.kt)("a",{parentName:"p",href:"/nodes/ui-controls/button"},"Button")," after the ",(0,i.kt)("strong",{parentName:"p"},"Text Inputs"),". Give it the label ",(0,i.kt)("strong",{parentName:"p"},"Merge"),".\nThen connect ",(0,i.kt)("strong",{parentName:"p"},"Click")," to ",(0,i.kt)("strong",{parentName:"p"},"Run")," on the function."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(15723).Z,width:"1785",height:"880"}))),(0,i.kt)("h2",{id:"sending-signals-on-outputs"},"Sending Signals on Outputs"),(0,i.kt)("p",null,"A ",(0,i.kt)("strong",{parentName:"p"},"Function")," node can also send signals. This is very useful for many scenarions,\nfor example to trigger something that should happen once the ",(0,i.kt)("strong",{parentName:"p"},"Function")," is executed.\nFor example, if we would want to store our merged string, we would want to trigger a ",(0,i.kt)("a",{parentName:"p",href:"/nodes/data/variable/set-variable"},"Set Variable")," node.\nLet's add in the signal, once the merging is done:"),(0,i.kt)("p",null,"Now click the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node and edit the script. Paste in the Javascript below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'if (Inputs.String1 !== undefined && Inputs.String2 !== undefined) {\n  let length = Math.max(Inputs.String1.length, Inputs.String2.length);\n  let outputString = "";\n  for (let i = 0; i < length; i++) {\n    if (i < Inputs.String1.length) {\n      outputString = outputString + Inputs.String1.charAt(i);\n    }\n    if (i < Inputs.String2.length) {\n      outputString = outputString + Inputs.String2.charAt(i);\n    }\n  }\n  Outputs.MergedString = outputString;\n  Outputs.Done();\n}\n')),(0,i.kt)("p",null,"Note the additional line ",(0,i.kt)("inlineCode",{parentName:"p"},"Outputs.Done()"),". That's all you need to send a signal.\nSo add in a ",(0,i.kt)("strong",{parentName:"p"},"Set Variable")," node and save the value in an ",(0,i.kt)("strong",{parentName:"p"},"Variable")," called ",(0,i.kt)("inlineCode",{parentName:"p"},"Merged String"),".\nYou might think that connecting directly from the ",(0,i.kt)("strong",{parentName:"p"},"Button")," to the ",(0,i.kt)("strong",{parentName:"p"},"Do")," action on the ",(0,i.kt)("strong",{parentName:"p"},"Set Variable")," might have worked, but it actually doesn't.\nYou cannot know if the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node have executed so the ",(0,i.kt)("strong",{parentName:"p"},"Do")," signal may trigger at the wrong time.\nInstead explicitly triggering ",(0,i.kt)("inlineCode",{parentName:"p"},"Done")," once you've set the output to the correct value takes care of this."),(0,i.kt)("p",null,"Another common way of using outgoing signals could be to trigger two different paths going forward.\nPerhaps the ",(0,i.kt)("strong",{parentName:"p"},"Function")," validates a data value and triggers a ",(0,i.kt)("inlineCode",{parentName:"p"},"Valid")," signal if the value is ok,\nthat saves then triggers a database save, while a ",(0,i.kt)("inlineCode",{parentName:"p"},"Invalid")," signal would open an error popup."),(0,i.kt)("p",null,"Now let's look at the more powerful ",(0,i.kt)("strong",{parentName:"p"},"Script")," node."),(0,i.kt)("h2",{id:"javascript-using-the-script-node"},"JavaScript using the ",(0,i.kt)("strong",{parentName:"h2"},"Script")," node"),(0,i.kt)("p",null,"This part of the guide will cover the functionality of the ",(0,i.kt)("a",{parentName:"p",href:"nodes/javascript/script"},"Script")," node.\nThe ",(0,i.kt)("strong",{parentName:"p"},"Script")," node is a great way to implement logic and calculations that are easier to express in code than in nodes and connections.\nIt's also a great way to get access to useful JavaScript APIs in the browser, for example ",(0,i.kt)("inlineCode",{parentName:"p"},"Date")," for date functionality or ",(0,i.kt)("inlineCode",{parentName:"p"},"Math")," for advanced math-functionality."),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"Script")," node is a bit more powerful than the ",(0,i.kt)("a",{parentName:"p",href:"nodes/javascript/function"},"Function")," node that also can be used to write JavaScript.\nThe ",(0,i.kt)("strong",{parentName:"p"},"Script")," node can have multiple methods and functions, as well as a well defined lifespan with callbacks when the node is created and destroyed.\nFor simpler JavaScript for processing inputs, usually the ",(0,i.kt)("strong",{parentName:"p"},"Function")," node is a simpler choice as you have seen above."),(0,i.kt)("p",null,"A ",(0,i.kt)("strong",{parentName:"p"},"Script")," node works as any other node in Noodl, in the sense that it has inputs and outputs that can be connected to other nodes.\nAll inputs and outputs are available to the developer in their JavaScript code.\nIn a ",(0,i.kt)("strong",{parentName:"p"},"Script")," node you can call any JavaScript function normally available in a browser environment."),(0,i.kt)("h2",{id:"the-script-source-file"},"The Script source file"),(0,i.kt)("p",null,"You can either edit the JavaScript code directly in the built-in editor in Noodl or you can use an external file with an external editor.\nWhile it's easy to write code snippets in the inline editor, the external file option might be better if you are working on larger files or even multiple files and modules."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(58206).Z,title:":class=img-size-l",width:"1334",height:"584"}))),(0,i.kt)("p",null,"An external file needs to be located in your project folder for Noodl to find it. You can copy a file to your project folder by dragging the file onto the Noodl window."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(27).Z,title:":class=img-size-l",width:"1174",height:"550"}))),(0,i.kt)("p",null,"The source code provided for the ",(0,i.kt)("strong",{parentName:"p"},"Script")," is executed as soon as the node is created. In order to specify inputs, outputs and receive and send signals from the node the ",(0,i.kt)("inlineCode",{parentName:"p"},"Node")," object must be used."),(0,i.kt)("h2",{id:"inputs-and-outputs"},"Inputs and outputs"),(0,i.kt)("p",null,"There are a number of ways to specify the inputs and outputs of the ",(0,i.kt)("strong",{parentName:"p"},"Script")," node. One way is to use the property panel and explicitly add them there. You can also provide the type."),(0,i.kt)("div",{className:"ndl-image-with-background"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(57378).Z,width:"556",height:"596"}))),(0,i.kt)("p",null,"Another way is to specify them programmatically in the source code. The inputs are defined in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.Inputs")," object. Each input also specifies what type it is. The available types are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"number")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"string")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"boolean")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"color")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"object")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"array"),". This is for Noodl Arrays, not JavaScript arrays."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"reference"),". A reference to a Noodl node, accessible through the ",(0,i.kt)("em",{parentName:"li"},"This")," output of visual nodes."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cloudfile"))),(0,i.kt)("p",null,"Note that there is no signal type for inputs, as the signals are handled by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.Signals")," object (more on that later)."),(0,i.kt)("p",null,"The outputs work in the same way as the inputs except that there's one more type you can use: ",(0,i.kt)("inlineCode",{parentName:"p"},"signal"),". The signal type is used for triggering a pulse on an output rather than outputting a specific value. Below we have added outputs to a ",(0,i.kt)("strong",{parentName:"p"},"Script")," node."),(0,i.kt)("p",null,"Since the inputs and outputs are members of an object, they should be separated by a comma. Below is an example of a ",(0,i.kt)("strong",{parentName:"p"},"Script")," node with two inputs and one output."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'Script.Inputs = {\n  RangeLow: "number",\n  RangeHigh: "number",\n};\n\nScript.Outputs = {\n  RandomNumber: "number",\n};\n')),(0,i.kt)("p",null,"Lets use the two inputs ",(0,i.kt)("inlineCode",{parentName:"p"},"RangeLow")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"RangeHigh")," to generate a random number on the ",(0,i.kt)("inlineCode",{parentName:"p"},"RandomNumber")," output. To execute the code, we will introduce a signal, ",(0,i.kt)("inlineCode",{parentName:"p"},"Generate"),"."),(0,i.kt)("h2",{id:"input-signals"},"Input signals"),(0,i.kt)("p",null,"Input signals are mapped to functions in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.Signals")," object in the JavaScript node. A signal function is called when the signal with the same name is triggered. Here's the implementation of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Generate")," signal. You can copy this code and add it to the ",(0,i.kt)("strong",{parentName:"p"},"Script")," source code."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Script.Signals.Generate = function () {\n  let randomNumber =\n    Math.random() * (Script.Inputs.RangeHigh - Script.Inputs.RangeLow) +\n    Script.Inputs.RangeLow;\n  Script.Outputs.RandomNumber = randomNumber;\n};\n")),(0,i.kt)("p",null,"Let's connect the the inputs, outputs and signals to some nodes."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(78199).Z,width:"720",height:"320"})),(0,i.kt)(o.Z,{json:{nodes:[{id:"20e7a891-e750-3d60-058f-804e324722eb",type:"Javascript2",x:-588.8750006232499,y:331.12222156165456,parameters:{code:'Script.Inputs = {\n    RangeLow: "number",\n    RangeHigh: "number",\n}\n\nScript.Outputs = {\n    RandomNumber: "number",\n}\n\nScript.Signals.Generate = function() {\n  let randomNumber = Math.random() * (Script.Inputs.RangeHigh - Script.Inputs.RangeLow) + Script.Inputs.RangeLow;\n  Script.Outputs.RandomNumber = randomNumber;\n}\n',RangeLow:0},ports:[],children:[]},{id:"42ca61a1-d015-69dc-48ed-a13e76818194",type:"Group",x:-365.17777825429016,y:268.1043044317845,parameters:{backgroundColor:"#FFFFFF",paddingTop:{value:20,unit:"px"},paddingLeft:{value:20,unit:"px"},paddingRight:{value:20,unit:"px"}},ports:[],children:[{id:"a15e91b8-5f23-47ce-446c-fea6760a8058",type:"Group",x:-345.17777825429016,y:314.1043044317845,parameters:{flexDirection:"row",sizeMode:"contentHeight",marginBottom:{value:10,unit:"px"}},ports:[],children:[{id:"c2e35d8b-c32a-8d1b-754e-6d33a90e9a8f",type:"Text",label:"Click Text",x:-325.17777825429016,y:360.1043044317845,parameters:{text:"Click here to generate number",fontSize:{value:15,unit:"px"},alignY:"bottom",sizeMode:"contentSize"},ports:[],children:[]}]},{id:"94d50d6a-1dc6-876f-39fb-2dfddf0749ef",type:"Group",label:"Arena",x:-345.17777825429016,y:456.1043044317845,parameters:{borderStyle:"solid",borderWidth:{value:2,unit:"px"},marginBottom:{value:0,unit:"px"},flexDirection:"column",sizeMode:"explicit",height:{value:35,unit:"px"}},ports:[],children:[{id:"7ccbd282-8a7a-1589-edac-acacf54cea24",type:"Circle",x:-325.17777825429016,y:552.1043044317845,parameters:{size:30,position:"absolute"},ports:[],children:[]}]}]},{id:"60c3158a-64a2-7664-abb1-02dae2731e9d",type:"Expression",label:"arenawidth-circlewidth",x:-590.8015248634624,y:443.9881840161512,parameters:{expression:"arenawidth-circlewidth"},ports:[],children:[]}],connections:[{fromId:"94d50d6a-1dc6-876f-39fb-2dfddf0749ef",fromProperty:"boundingWidth",toId:"60c3158a-64a2-7664-abb1-02dae2731e9d",toProperty:"arenawidth"},{fromId:"7ccbd282-8a7a-1589-edac-acacf54cea24",fromProperty:"boundingWidth",toId:"60c3158a-64a2-7664-abb1-02dae2731e9d",toProperty:"circlewidth"},{fromId:"60c3158a-64a2-7664-abb1-02dae2731e9d",fromProperty:"result",toId:"20e7a891-e750-3d60-058f-804e324722eb",toProperty:"RangeHigh"},{fromId:"20e7a891-e750-3d60-058f-804e324722eb",fromProperty:"RandomNumber",toId:"7ccbd282-8a7a-1589-edac-acacf54cea24",toProperty:"transformX"},{fromId:"c2e35d8b-c32a-8d1b-754e-6d33a90e9a8f",fromProperty:"onClick",toId:"20e7a891-e750-3d60-058f-804e324722eb",toProperty:"Generate"}],comments:[]},mdxType:"CopyToClipboardButton"})),(0,i.kt)("h2",{id:"reading-inputs-and-setting-outputs"},"Reading inputs and setting outputs"),(0,i.kt)("p",null,"You can read the inputs directly through the members of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.Inputs")," object, typically ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.Inputs.AnInput"),"."),(0,i.kt)("p",null,"There are two ways to set the outputs. Set the value by setting the appropriate property of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.Outputs")," object:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Script.Outputs.RandomNumber = randomNumber;\n")),(0,i.kt)("p",null,"Set many outputs at the same time using the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.setOutputs")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Script.setOutputs({\n  One: 1,\n  Two: 2,\n});\n")),(0,i.kt)("p",null,"This is useful when you have an object that contains multiple values you want to send at once."),(0,i.kt)("p",null,"Finally if you want to send a signal on an output you need to use the output as a function, calling it when you want to send the signal."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Script.Outputs.MySignalOutput();\n")),(0,i.kt)("p",null,"Now let's add a bit more code to our JavaScript example. Instead of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Generate")," signal we will implement ",(0,i.kt)("inlineCode",{parentName:"p"},"Start")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Stop")," signals and have the ",(0,i.kt)("strong",{parentName:"p"},"JavaScript")," node generate new numbers continuously. We will start a timer in ",(0,i.kt)("inlineCode",{parentName:"p"},"Start")," that will trigger after a random time, influenced by the ",(0,i.kt)("inlineCode",{parentName:"p"},"Lambda")," input. The higher the ",(0,i.kt)("inlineCode",{parentName:"p"},"Lambda")," the shorter the time and the higher the rate of generated numbers."),(0,i.kt)("p",null,"?> See the ",(0,i.kt)("a",{href:"https://en.wikipedia.org/wiki/Poisson_point_process",target:"_blank"},"Poisson process")," for the math behind generating a random number using a Poisson distribution."),(0,i.kt)("p",null,"When the timer is triggered, a random number is generated based on the ranges provided to the node. Finally a signal to notify that a new number has been generated is sent and the timer is restarted with a new timeout.\nWhen the ",(0,i.kt)("inlineCode",{parentName:"p"},"Stop")," signal is triggered the timer is stopped."),(0,i.kt)("p",null,"Here's the code that generates the random numbers with a Poisson distributed time in between them."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'Script.Inputs = {\n  Lambda: "number",\n  RangeLow: "number",\n  RangeHigh: "number",\n};\n\nScript.Outputs = {\n  Trigger: "signal",\n  RandomNumber: "number",\n};\n\nvar timer;\n\nfunction generateRandNum(rangeLow, rangeHigh) {\n  return Math.random() * (rangeHigh - rangeLow) + rangeLow;\n}\n\nfunction calculateIntervalMs(lambda) {\n  let interval = -Math.log(1.0 - Math.random()) / lambda;\n  // translate from seconds to milliseconds\n  return interval * 1000;\n}\n\nScript.Signals.Start = function () {\n  console.log("Start");\n  let timeOutFunction = () => {\n    // generate the random number\n    let randNum = generateRandNum(\n      Script.Inputs.RangeLow,\n      Script.Inputs.RangeHigh\n    );\n    // set it on the output "RandomNumber"\n    Script.setOutputs({ RandomNumber: randNum });\n    // Trigger the signal "Trigger"\n    Script.Outputs.Trigger();\n    // restart the timer at a new interval\n    timer = setTimeout(\n      timeOutFunction,\n      calculateIntervalMs(Script.Inputs.Lambda)\n    );\n  };\n\n  // start the first timer\n  let interval = calculateIntervalMs(Script.Inputs.Lambda);\n\n  timer = setTimeout(timeOutFunction, interval);\n};\n\nScript.Signals.Stop = function () {\n  clearTimeout(timer);\n  timer = undefined;\n};\n')),(0,i.kt)("h2",{id:"changed-inputs"},"Changed inputs"),(0,i.kt)("p",null,"You can run code whenever an input is changed. In this particular case, when the ",(0,i.kt)("inlineCode",{parentName:"p"},"Lambda")," input of the random number generator is changed, the timer interval should be updated to avoid waiting for the next timer to time out for the change to take effect. To handle a case like this, a function with the same name as the input, ",(0,i.kt)("inlineCode",{parentName:"p"},"Lambda"),", is added in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.Setters")," object. An additional state variable, ",(0,i.kt)("inlineCode",{parentName:"p"},"started"),", is added to make sure that changing the value when the timer is stopped won't cause it to start."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"var started = false;\nScript.Setters.Lambda = function (value) {\n  if (started === true) {\n    clearTimeout(timer);\n    startTimer();\n  }\n};\n")),(0,i.kt)("h2",{id:"the-final-code"},"The final code"),(0,i.kt)("p",null,"After some small refactoring the final code looks as below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'Script.Inputs = {\n  Lambda: "number",\n  RangeLow: "number",\n  RangeHigh: "number",\n};\n\nScript.Outputs = {\n  Trigger: "signal",\n  RandomNumber: "number",\n};\n\nvar timer;\nvar started = false;\n\nfunction generateRandNum(rangeLow, rangeHigh) {\n  return Math.random() * (rangeHigh - rangeLow) + rangeLow;\n}\n\nfunction calculateIntervalMs(lambda) {\n  let interval = -Math.log(1.0 - Math.random()) / lambda;\n  // translate from seconds to milliseconds\n  return interval * 1000;\n}\n\nfunction startTimer() {\n  let timeOutFunction = () => {\n    // generate the random number\n    let randNum = generateRandNum(\n      Script.Inputs.RangeLow,\n      Script.Inputs.RangeHigh\n    );\n    // set it on the output "RandomNumber"\n    Script.setOutputs({ RandomNumber: randNum });\n    // Trigger the signal "Trigger"\n    Script.Outputs.Trigger();\n    // restart the timer at a new interval\n    timer = setTimeout(\n      timeOutFunction,\n      calculateIntervalMs(Script.Inputs.Lambda)\n    );\n  };\n\n  // start the first timer\n  let interval = calculateIntervalMs(Script.Inputs.Lambda);\n\n  timer = setTimeout(timeOutFunction, interval);\n}\n\nScript.Signals = {\n  Start() {\n    started = true;\n    startTimer();\n  },\n  Stop() {\n    clearTimeout(timer);\n    started = false;\n  },\n};\n\nScript.Setters.Lambda = function (value) {\n  if (started === true) {\n    clearTimeout(timer);\n    startTimer();\n  }\n};\n')),(0,i.kt)("h2",{id:"using-script-nodes"},"Using script nodes"),(0,i.kt)("p",null,"Connecting to the the inputs and outputs, the ",(0,i.kt)("strong",{parentName:"p"},"Script")," nodes can be used as any other nodes in Noodl. As an example, the Random Generator ",(0,i.kt)("strong",{parentName:"p"},"Script")," node has been combined with a simple UI to control the inputs. The output of the random generator is used to move a circle on the screen and trigger state changes. We have also copy & pasted the ",(0,i.kt)("strong",{parentName:"p"},"Script")," node and use it two times. This works great, but remember that the JavaScript code is cloned if you are using an inline source so changing the code in one ",(0,i.kt)("strong",{parentName:"p"},"Script")," node does not affect the other. It's often a good idea to encapsulate a reusable ",(0,i.kt)("strong",{parentName:"p"},"Script")," node in a Noodl component."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(87471).Z,width:"720",height:"320"})),(0,i.kt)(o.Z,{json:{nodes:[{id:"e1b76139-42b1-f1aa-d935-8697c02446e5",type:"Group",x:550.8894402215635,y:769.5545779864274,parameters:{backgroundColor:"#FFFFFF",paddingTop:{value:20,unit:"px"},paddingLeft:{value:20,unit:"px"},paddingRight:{value:20,unit:"px"}},ports:[],children:[{id:"7d179c30-3108-a71d-76bf-0f760b7f9417",type:"Group",x:570.8894402215635,y:815.5545779864274,parameters:{flexDirection:"row",sizeMode:"contentHeight",marginBottom:{value:10,unit:"px"}},ports:[],children:[{id:"801c4a96-5219-b818-4564-87a704f84837",type:"Text",label:"Rate controller text",x:590.8894402215635,y:861.5545779864274,parameters:{text:"Random generator is",fontSize:{value:15,unit:"px"},alignY:"bottom",sizeMode:"contentSize"},ports:[],children:[]},{id:"f54f6144-306d-9339-4e9c-a1fd70d0910d",type:"Group",label:"On/Off Spinner",x:590.8894402215635,y:921.5545779864274,parameters:{sizeMode:"explicit",height:{value:20,unit:"px"},clip:!0,alignY:"bottom",marginLeft:{value:10,unit:"px"},flexDirection:"none",width:{value:30,unit:"px"}},ports:[],children:[{id:"8d21ec9d-7d28-d1e1-6435-ed102c432236",type:"Text",label:"Off",x:610.8894402215635,y:1017.5545779864274,parameters:{text:"Off",color:"#006394",fontSize:{value:15,unit:"px"},sizeMode:"contentSize",alignY:"bottom"},ports:[],children:[]},{id:"6ec39536-2ae0-13da-31a9-0c95693eb91a",type:"Text",label:"On",x:610.8894402215635,y:1113.5545779864274,parameters:{text:"On",fontSize:{value:15,unit:"px"},color:"#006394",sizeMode:"contentSize",alignY:"bottom"},ports:[],children:[]}]}]},{id:"83c96b0c-c3b3-c331-4c9c-ea903740c149",type:"Group",label:"Text and Rate controller",x:570.8894402215635,y:1209.5545779864274,parameters:{flexDirection:"row",sizeMode:"contentHeight",marginBottom:{value:10,unit:"px"}},ports:[],children:[{id:"3e8aa8af-5940-099e-9aa4-04aafc48f785",type:"Text",label:"Set rate",x:590.8894402215635,y:1283.5545779864274,parameters:{text:"Set rate",fontSize:{value:15,unit:"px"},alignY:"center",sizeMode:"contentSize",marginRight:{value:20,unit:"px"}},ports:[],children:[]},{id:"e30dd54b-7feb-d649-f3f9-e8f89ed96f7e",type:"Group",label:"Rate Controller",x:590.8894402215635,y:1343.5545779864274,parameters:{sizeMode:"explicit",height:{value:30,unit:"px"},flexDirection:"none",width:{value:200,unit:"px"}},ports:[],children:[{id:"e6d5752f-cedd-429d-3d3d-173d747c8c85",type:"Group",label:"Rate controller Bg",x:610.8894402215635,y:1403.5545779864274,parameters:{height:{value:20,unit:"px"},backgroundColor:"#C6C6C6",borderRadius:{value:10,unit:"px"},alignY:"center"},ports:[],children:[]},{id:"241b0a6f-b409-7cbd-dc61-3bc39c020667",type:"Drag",x:610.8894402215635,y:1499.5545779864274,parameters:{},ports:[],children:[{id:"31252340-8be5-166c-4c16-f3d178135139",type:"Group",label:"Drag handle",x:630.8894402215635,y:1581.5545779864274,parameters:{height:{value:20,unit:"px"},width:{value:5,unit:"px"},backgroundColor:"#434B53",paddingLeft:{value:0,unit:"px"},marginLeft:{value:10,unit:"px"},marginRight:{value:10,unit:"px"},borderRadius:{value:2,unit:"px"},alignY:"center"},ports:[],children:[]}]}]}]},{id:"f227417b-8cd3-3c03-5501-1b85add9566c",type:"Group",label:"Arena",x:570.8894402215635,y:1641.5545779864274,parameters:{borderStyle:"solid",borderWidth:{value:2,unit:"px"},marginBottom:{value:10,unit:"px"},flexDirection:"none"},ports:[],children:[{id:"521f5c37-4508-f725-d67d-44f0227e3aa9",type:"Circle",x:590.8894402215635,y:1737.5545779864274,parameters:{size:30,position:"absolute"},ports:[],children:[]}]}]},{id:"238629f6-8594-ac78-ba25-a8141cebf4f6",type:"States",x:110.74283186907337,y:946.5074351399836,parameters:{states:"Off,On",values:"Off y position,On y Position","value-Off-Off y position":0,"value-On-Off y position":-20,"value-Off-On y Position":20,"value-On-On y Position":0},ports:[],children:[]},{id:"606ead21-564f-f2d3-8311-30eb63af8eab",type:"Javascript2",label:"Poisson Process",x:360.9506961673602,y:1177.1836206411483,parameters:{code:'Script.Inputs = {\n  Lambda: "number",\n  RangeLow: "number",\n  RangeHigh: "number",\n}\n\nScript.Outputs = {\n  Trigger: "signal",\n  RandomNumber: "number",\n}\n\nvar timer;\nvar started = false;\n\nfunction generateRandNum(rangeLow, rangeHigh) {\n  return Math.random() * (rangeHigh - rangeLow) + rangeLow;\n}\n\nfunction calculateIntervalMs(lambda) {\n  let interval = -Math.log(1.0 - Math.random()) / lambda;\n  // translate from seconds to milliseconds\n  return interval * 1000;\n}\n\nfunction startTimer() {\n  let timeOutFunction = () => {\n    // generate the random number\n    let randNum = generateRandNum(\n      Script.Inputs.RangeLow,\n      Script.Inputs.RangeHigh\n    );\n    // set it on the output "RandomNumber"\n    Script.setOutputs({ RandomNumber: randNum });\n    // Trigger the signal "Trigger"\n    Script.Outputs.Trigger()\n    // restart the timer at a new interval\n    timer = setTimeout(\n      timeOutFunction,\n      calculateIntervalMs(Script.Inputs.Lambda)\n    );\n  };\n\n  // start the first timer\n  let interval = calculateIntervalMs(Script.Inputs.Lambda);\n\n  timer = setTimeout(timeOutFunction, interval);\n}\n\nScript.Signals = {\n  Start() {\n    started = true;\n    startTimer();\n  },\n  Stop() {\n    clearTimeout(timer);\n    started = false;\n  }\n}\n\nScript.Setters.Lambda = function (value) {\n  if (started === true) {\n    clearTimeout(timer);\n    startTimer();\n  }\n}\n',Lambda:2,RangeLow:0},ports:[],children:[]},{id:"cdd08f56-26b6-c81f-729b-ef7220190933",type:"Expression",label:"Lambda value",x:943.791823827788,y:1223.6044302506757,parameters:{expression:"xpos/(DrageAreaWidth - 25)*3 + 0.1"},ports:[],children:[]},{id:"26b6b95e-48c9-d4a5-2255-124bef51428b",type:"Expression",x:297.4155454673813,y:1508.2775409338583,parameters:{expression:"ArenaWidth - CircleRadius"},ports:[],children:[]},{id:"99c3a02d-7b32-d31e-40d0-fc6bd485f2d3",type:"Transition",x:272.28959152461647,y:1742.5301598853775,parameters:{},ports:[],children:[]},{id:"9a29693e-97b7-e24a-c39f-95745e15289a",type:"Javascript2",label:"Poisson Process",x:973.3810754787316,y:1711.8056993389462,parameters:{code:'Script.Inputs = {\n  Lambda: "number",\n  RangeLow: "number",\n  RangeHigh: "number",\n}\n\nScript.Outputs = {\n  Trigger: "signal",\n  RandomNumber: "number",\n}\n\nvar timer;\nvar started = false;\n\nfunction generateRandNum(rangeLow, rangeHigh) {\n  return Math.random() * (rangeHigh - rangeLow) + rangeLow;\n}\n\nfunction calculateIntervalMs(lambda) {\n  let interval = -Math.log(1.0 - Math.random()) / lambda;\n  // translate from seconds to milliseconds\n  return interval * 1000;\n}\n\nfunction startTimer() {\n  let timeOutFunction = () => {\n    // generate the random number\n    let randNum = generateRandNum(\n      Script.Inputs.RangeLow,\n      Script.Inputs.RangeHigh\n    );\n    // set it on the output "RandomNumber"\n    Script.setOutputs({ RandomNumber: randNum });\n    // Trigger the signal "Trigger"\n    Script.Outputs.Trigger()\n    // restart the timer at a new interval\n    timer = setTimeout(\n      timeOutFunction,\n      calculateIntervalMs(Script.Inputs.Lambda)\n    );\n  };\n\n  // start the first timer\n  let interval = calculateIntervalMs(Script.Inputs.Lambda);\n\n  timer = setTimeout(timeOutFunction, interval);\n}\n\nScript.Signals = {\n  Start() {\n    started = true;\n    startTimer();\n  },\n  Stop() {\n    clearTimeout(timer);\n    started = false;\n  }\n}\n\nScript.Setters.Lambda = function (value) {\n  if (started === true) {\n    clearTimeout(timer);\n    startTimer();\n  }\n}\n',Lambda:2,RangeLow:0},ports:[],children:[]},{id:"db634033-b137-02ea-5d50-706c06432557",type:"Expression",x:952.9005306361687,y:1948.8030166078263,parameters:{expression:"ArenaHeight-CircleRadius"},ports:[],children:[]},{id:"0a89a18b-cfe3-c6f9-18bc-221a7ffb2182",type:"Transition",x:910.411880595271,y:1523.391447982002,parameters:{},ports:[],children:[]},{id:"7249be82-0072-c1ab-1e4c-c0c60903f8cf",type:"States",label:"Circle Color",x:291.63095980838676,y:1874.4551715183388,parameters:{states:"Color 1,Color 2,Color 3,Color 4",values:"Circle Color","type-Circle Color":"color","value-Color 1-Circle Color":"#A92952","value-Color 2-Circle Color":"#F0BF56","value-Color 3-Circle Color":"#006394","value-Color 4-Circle Color":"#5E4275"},ports:[],children:[]},{id:"31a54762-a486-533b-6041-e2b99c000ee4",type:"States",x:659.6426944801517,y:2001.0264630214242,parameters:{states:"Small,Big",values:"Radius","value-Small-Radius":30,"value-Big-Radius":50},ports:[],children:[]}],connections:[{fromId:"238629f6-8594-ac78-ba25-a8141cebf4f6",fromProperty:"Off y position",toId:"8d21ec9d-7d28-d1e1-6435-ed102c432236",toProperty:"transformY"},{fromId:"238629f6-8594-ac78-ba25-a8141cebf4f6",fromProperty:"On y Position",toId:"6ec39536-2ae0-13da-31a9-0c95693eb91a",toProperty:"transformY"},{fromId:"f54f6144-306d-9339-4e9c-a1fd70d0910d",fromProperty:"onClick",toId:"238629f6-8594-ac78-ba25-a8141cebf4f6",toProperty:"toggle"},{fromId:"241b0a6f-b409-7cbd-dc61-3bc39c020667",fromProperty:"positionX",toId:"cdd08f56-26b6-c81f-729b-ef7220190933",toProperty:"xpos"},{fromId:"e6d5752f-cedd-429d-3d3d-173d747c8c85",fromProperty:"boundingWidth",toId:"cdd08f56-26b6-c81f-729b-ef7220190933",toProperty:"DrageAreaWidth"},{fromId:"238629f6-8594-ac78-ba25-a8141cebf4f6",fromProperty:"reached-On",toId:"606ead21-564f-f2d3-8311-30eb63af8eab",toProperty:"Start"},{fromId:"238629f6-8594-ac78-ba25-a8141cebf4f6",fromProperty:"reached-Off",toId:"606ead21-564f-f2d3-8311-30eb63af8eab",toProperty:"Stop"},{fromId:"cdd08f56-26b6-c81f-729b-ef7220190933",fromProperty:"result",toId:"606ead21-564f-f2d3-8311-30eb63af8eab",toProperty:"Lambda"},{fromId:"521f5c37-4508-f725-d67d-44f0227e3aa9",fromProperty:"boundingWidth",toId:"26b6b95e-48c9-d4a5-2255-124bef51428b",toProperty:"CircleRadius"},{fromId:"26b6b95e-48c9-d4a5-2255-124bef51428b",fromProperty:"result",toId:"606ead21-564f-f2d3-8311-30eb63af8eab",toProperty:"RangeHigh"},{fromId:"606ead21-564f-f2d3-8311-30eb63af8eab",fromProperty:"RandomNumber",toId:"99c3a02d-7b32-d31e-40d0-fc6bd485f2d3",toProperty:"targetValue"},{fromId:"99c3a02d-7b32-d31e-40d0-fc6bd485f2d3",fromProperty:"currentValue",toId:"521f5c37-4508-f725-d67d-44f0227e3aa9",toProperty:"transformX"},{fromId:"cdd08f56-26b6-c81f-729b-ef7220190933",fromProperty:"result",toId:"9a29693e-97b7-e24a-c39f-95745e15289a",toProperty:"Lambda"},{fromId:"f227417b-8cd3-3c03-5501-1b85add9566c",fromProperty:"boundingWidth",toId:"26b6b95e-48c9-d4a5-2255-124bef51428b",toProperty:"ArenaWidth"},{fromId:"f227417b-8cd3-3c03-5501-1b85add9566c",fromProperty:"boundingHeight",toId:"db634033-b137-02ea-5d50-706c06432557",toProperty:"ArenaHeight"},{fromId:"521f5c37-4508-f725-d67d-44f0227e3aa9",fromProperty:"boundingHeight",toId:"db634033-b137-02ea-5d50-706c06432557",toProperty:"CircleRadius"},{fromId:"db634033-b137-02ea-5d50-706c06432557",fromProperty:"result",toId:"9a29693e-97b7-e24a-c39f-95745e15289a",toProperty:"RangeHigh"},{fromId:"9a29693e-97b7-e24a-c39f-95745e15289a",fromProperty:"RandomNumber",toId:"0a89a18b-cfe3-c6f9-18bc-221a7ffb2182",toProperty:"targetValue"},{fromId:"0a89a18b-cfe3-c6f9-18bc-221a7ffb2182",fromProperty:"currentValue",toId:"521f5c37-4508-f725-d67d-44f0227e3aa9",toProperty:"transformY"},{fromId:"238629f6-8594-ac78-ba25-a8141cebf4f6",fromProperty:"reached-Off",toId:"9a29693e-97b7-e24a-c39f-95745e15289a",toProperty:"Stop"},{fromId:"238629f6-8594-ac78-ba25-a8141cebf4f6",fromProperty:"reached-On",toId:"9a29693e-97b7-e24a-c39f-95745e15289a",toProperty:"Start"},{fromId:"7249be82-0072-c1ab-1e4c-c0c60903f8cf",fromProperty:"Circle Color",toId:"521f5c37-4508-f725-d67d-44f0227e3aa9",toProperty:"fillColor"},{fromId:"606ead21-564f-f2d3-8311-30eb63af8eab",fromProperty:"Trigger",toId:"7249be82-0072-c1ab-1e4c-c0c60903f8cf",toProperty:"toggle"},{fromId:"9a29693e-97b7-e24a-c39f-95745e15289a",fromProperty:"Trigger",toId:"31a54762-a486-533b-6041-e2b99c000ee4",toProperty:"toggle"},{fromId:"31a54762-a486-533b-6041-e2b99c000ee4",fromProperty:"Radius",toId:"521f5c37-4508-f725-d67d-44f0227e3aa9",toProperty:"size"}],comments:[]},mdxType:"CopyToClipboardButton"})),(0,i.kt)("h2",{id:"debugging"},"Debugging"),(0,i.kt)("p",null,"As with any coding, you will sooner or later make a mistake in your code. Noodl will catch both syntax errors and runtime errors and highlight the ",(0,i.kt)("strong",{parentName:"p"},"Script")," node causing the error. You can also find errors in the warnings popup."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(75766).Z,width:"1874",height:"628"}))),(0,i.kt)("p",null,"As seen in the image above, syntax errors in the code can cause inputs and outputs of the node to becomes invalid. Fixing the syntax error will restore the connections."),(0,i.kt)("p",null,"To debug your javascript you can launch the web debugger from the viewer window by clicking the bug icon."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(7674).Z,width:"2044",height:"764"}))),(0,i.kt)("p",null,"In the web debugger you can find any external source files that your are using in your script nodes, but if you want to set a breakpoint in an internal file you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"debugger")," command. Here's an example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"Script.Signals.Stop = function () {\n  debugger; // This will cause the debugger to break here when running\n  clearTimeout(timer);\n  timer = undefined;\n};\n")),(0,i.kt)("h3",{id:"running-code-when-a-script-node-is-created-or-destroyed"},"Running code when a Script node is created or destroyed"),(0,i.kt)("p",null,"A Script node is created when the Noodl component that it belongs to is created. Components are created when the app is first launched, when navigation happens, and when a ",(0,i.kt)("a",{parentName:"p",href:"/nodes/ui-controls/repeater.md"},"Repeater")," node creates items. The ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.OnInit")," function is automatically called by Noodl when the Script node is created."),(0,i.kt)("p",null,"Components can be destroyed when doing navigation or when removing items from a list used by a Repeater node. This will run the ",(0,i.kt)("inlineCode",{parentName:"p"},"Script.OnDestroy")," function."),(0,i.kt)("p",null,"Here's an example that sets up an event listener on the ",(0,i.kt)("inlineCode",{parentName:"p"},"body")," element and removes it when the node is destroyed to avoid memory leaks."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'function setPosition(e) {\n  Script.Outputs.PointerX = e.clientX;\n  Script.Outputs.PointerY = e.clientY;\n}\n\nScript.OnInit = function () {\n  document.body.addEventListener("mousemove", setPosition);\n  document.body.addEventListener("mousedown", setPosition);\n};\n\nScript.OnDestroy = function () {\n  document.body.removeEventListener("mousedown", setPosition);\n  document.body.removeEventListener("mousemove", setPosition);\n};\n')))}g.isMDXComponent=!0},57378:function(e,t,n){t.Z=n.p+"assets/images/function-3-eda0fe0c8a9df93c8fb8a67442667fde.png"},24411:function(e,t,n){t.Z=n.p+"assets/images/function-node-1-3a8e2a0fc04f122767fd7671138247d0.png"},37281:function(e,t,n){t.Z=n.p+"assets/images/function-node-2-ac541fb88e2addff4b5a6891f479e1c7.png"},15723:function(e,t,n){t.Z=n.p+"assets/images/function-node-3-57a9b5478ac153ecedc63fdd63c60386.png"},7674:function(e,t,n){t.Z=n.p+"assets/images/open-debugger-43393314bda1442ae28d7a323c4b1ce9.png"},78199:function(e,t,n){t.Z=n.p+"assets/images/random1-7d942aa616b4b12b90c68a3e8d9aeacf.gif"},87471:function(e,t,n){t.Z=n.p+"assets/images/random3-3c573e0e67148cae5ec84b906ed884b6.gif"},75766:function(e,t,n){t.Z=n.p+"assets/images/script-error-916a3cf13ac91b249d3740c0dc55d6aa.png"},58206:function(e,t,n){t.Z=n.p+"assets/images/script-inline-code-19f17be55f59b8b46b58b004fe9e5190.png"},27:function(e,t,n){t.Z=n.p+"assets/images/script-pick-file-f4d5698d7e91bab355155c7eaea23b92.png"}}]);