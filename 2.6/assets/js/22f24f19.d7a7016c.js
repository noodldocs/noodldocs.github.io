"use strict";(self.webpackChunknew_noodl_docs=self.webpackChunknew_noodl_docs||[]).push([[627],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(n),m=a,h=u["".concat(s,".").concat(m)]||u[m]||c[m]||r;return n?o.createElement(h,l(l({ref:t},p),{},{components:n})):o.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var d=2;d<r;d++)l[d]=n[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},9726:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return c}});var o=n(83117),a=n(80102),r=(n(67294),n(3905)),l=["components"],i={},s="Create a new core node",d={unversionedId:"extending/create-lib",id:"extending/create-lib",title:"Create a new core node",description:"Noodl is very extensible. As a developer you can add new modules with new capablities, create connections to data or make new visual components in your workspace. This guide gets us started by showing how the Noodl command line tool works and how to create an extension module with a single new node. This node will behave and appear just like the standard core nodes of Noodl.",source:"@site/javascript/extending/create-lib.md",sourceDirName:"extending",slug:"/extending/create-lib",permalink:"/2.6/javascript/extending/create-lib",tags:[],version:"current",frontMatter:{},sidebar:"apiSidebar",previous:{title:"Extending Noodl",permalink:"/2.6/javascript/extending/overview"},next:{title:"Create a React component",permalink:"/2.6/javascript/extending/create-react-lib"}},p={},c=[{value:"Setup",id:"setup",level:2},{value:"Push library to Noodl",id:"push-library-to-noodl",level:2},{value:"A tour of the code",id:"a-tour-of-the-code",level:2},{value:"Documentation",id:"documentation",level:2}],u={toc:c};function m(e){var t=e.components,i=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,o.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"create-a-new-core-node"},"Create a new core node"),(0,r.kt)("p",null,"Noodl is very extensible. As a developer you can add new modules with new capablities, create connections to data or make new visual components in your workspace. This guide gets us started by showing how the Noodl command line tool works and how to create an extension module with a single new node. This node will behave and appear just like the standard core nodes of Noodl."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This guide requires ",(0,r.kt)("a",{href:"https://nodejs.org/en/download/",target:"_blank"},"Node.js")," and ",(0,r.kt)("a",{href:"https://docs.npmjs.com/downloading-and-installing-node-js-and-npm",target:"_blank"},"npm")," installed."))),(0,r.kt)("h2",{id:"setup"},"Setup"),(0,r.kt)("p",null,"First you need to install the Noodl command line interfaces. If you have not previously installed the CLI you can do so via npm."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g @noodl/noodl-cli\n")),(0,r.kt)("p",null,"With the CLI tool you can easily create a new library module from a template:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"noodl-cli create-lib my-noodl-lib\n")),(0,r.kt)("p",null,"You need to specify a directory name that will be created. The directory will contain everything you need to get started. Using the command above, the directory ",(0,r.kt)("em",{parentName:"p"},"my-noodl-lib")," will be created."),(0,r.kt)("p",null,"The newly created directory has the following structure:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"my-noodl-lib/\n    module/\n    project/\n    tests/\n    icon.png\n    module.json\n")),(0,r.kt)("p",null,"First some notes on the content of a library module:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("strong",{parentName:"p"},"module")," directory contains the source code for the module as well as build scripts and any assets you might want, such as fonts, css etc.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("strong",{parentName:"p"},"project")," directory contains a Noodl project that will accompany the module. When a module is imported into a Noodl project, all content of this project is added to the project. So if you want components to follow along with your module you can add it to this project. By default the project is empty and only contains the code of your module.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("strong",{parentName:"p"},"tests")," folder contains a test project that you can use when you are developing your module, nothing in this project will be packaged into the module. This is a local project that needs to be imported into Noodl, we will show you how to do that below."))),(0,r.kt)("p",null,"!> It is important that you do not change the name of the ",(0,r.kt)("strong",{parentName:"p"},"project")," and ",(0,r.kt)("strong",{parentName:"p"},"tests")," folders. The build scripts in the ",(0,r.kt)("em",{parentName:"p"},"module")," folder is dependent on these names or it till not build the module properly and you cannot push to your workspace."),(0,r.kt)("p",null,"First enter the ",(0,r.kt)("strong",{parentName:"p"},"module")," directory and install the needed dependencies:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd module\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\n")),(0,r.kt)("p",null,"Once the dependencies are installed you can build the module using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run build\n")),(0,r.kt)("p",null,"You can also enter development mode where the module will be rebuilt when it detects changes in the source code."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run dev\n")),(0,r.kt)("p",null,"Part of the development flow is to load the accompanying Noodl tests project that we can use to develop and test our module. First launch Noodl."),(0,r.kt)("p",null,"Next choose ",(0,r.kt)("strong",{parentName:"p"},"Import project")," at the bottom of the page."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(15691).Z,width:"1010",height:"144"})),(0,r.kt)("p",null,"On the next screen you will import the ",(0,r.kt)("strong",{parentName:"p"},"tests")," project."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(74493).Z,width:"1774",height:"700"})),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"This is ",(0,r.kt)("strong",{parentName:"p"},"very important"),": Make sure the \u201cLocal storage\u201d checkbox is checked!"))),(0,r.kt)("p",null,"This will ensure that the project you are importing is stored locally on your computer and is edited in the place where you import from. In this case you will edit the project in your workspace directory."),(0,r.kt)("p",null,"Give your project a name (any name will do) and then hit the ",(0,r.kt)("strong",{parentName:"p"},"Pick folder and create project")," button."),(0,r.kt)("p",null,"Find the ",(0,r.kt)("strong",{parentName:"p"},"tests")," directory of your newly created library and then hit Open. Noodl will now open the test project that contains your custom module code. In the project there is a simple test the uses the new node:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(43959).Z,width:"1476",height:"730"})),(0,r.kt)("p",null,"As mentioned before there are two projects created as part of the template, the ",(0,r.kt)("strong",{parentName:"p"},"tests")," folder and the ",(0,r.kt)("strong",{parentName:"p"},"project")," folder. You can import the latter in the same way and edit it in Noodl, both projects will contain the code of the module. The ",(0,r.kt)("strong",{parentName:"p"},"project")," folder will be packaged up with your module, so any components or content you add to that project, e.g. fonts or images, will be part of your module."),(0,r.kt)("h2",{id:"push-library-to-noodl"},"Push library to Noodl"),(0,r.kt)("p",null,"We will soon dive into the code in the library module, but let's first push the library to our Noodl workspace."),(0,r.kt)("p",null,"First we need to add some descriptive information to our library. Go back to the root folder or the library, in this example it's the ",(0,r.kt)("em",{parentName:"p"},"my-noodl-lib")," folder we created in the first step. Then run this command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'noodl-cli desc --label "My Noodl Lib" --desc "A short description of my lib"\n')),(0,r.kt)("p",null,"Add your own descriptive label and description of your module. Next up you can replace the default ",(0,r.kt)("em",{parentName:"p"},"icon.png")," file with something that represents your library visually."),(0,r.kt)("p",null,"Now you need to find the Noodl workspace access key. This key is found in the Noodl console, you need to sign in to the Noodl console at ",(0,r.kt)("a",{parentName:"p",href:"https://console.noodl.net"},"https://console.noodl.net"),". After you sign in, find the workspace your want to push to and click ",(0,r.kt)("em",{parentName:"p"},"Manage"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(55735).Z,width:"718",height:"406"})),(0,r.kt)("p",null,"You will find the access key by clicking ",(0,r.kt)("em",{parentName:"p"},"Show Access Key")," in the header, this will show a popup with the access key."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(87227).Z,width:"906",height:"450"})),(0,r.kt)("p",null,"With the key in hand you can run the following command in the root of your library folder, e.g. the ",(0,r.kt)("em",{parentName:"p"},"my-noodl-lib")," folder in this example."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'noodl-cli push --accessKey "the-access-key"\n')),(0,r.kt)("p",null,"That's it. Now you will find your library in the library pane within the Noodl editor. Any user of your workspace will see all modules and it can be added to a project with the ",(0,r.kt)("em",{parentName:"p"},"Add")," button."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(55984).Z,width:"1608",height:"428"})),(0,r.kt)("p",null,"If you make changes to the library module or project, you need to rebuild and then push the new module to your workspace."),(0,r.kt)("p",null,"!> Currently you need to restart Noodl for the module to show up, also you need to restart to make sure you have the latest version of the library."),(0,r.kt)("p",null,"If you want to remove your module from the workspace simply run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'noodl-cli remove --accessKey "the-access-key"\n')),(0,r.kt)("h2",{id:"a-tour-of-the-code"},"A tour of the code"),(0,r.kt)("p",null,"Now you have created a new library module from the template and you have pushed it to your Noodl workspace. Let's review the code a bit to get you up and running."),(0,r.kt)("p",null,"The source code can be found in the ",(0,r.kt)("strong",{parentName:"p"},"module")," directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"my-noodle-lib/\n    module/\n        src/\n            index.js\n        assets/\n            manifest.json\n        package.json\n        webpack.config.js\n    project/\n        ...\n")),(0,r.kt)("p",null,"Open ",(0,r.kt)("em",{parentName:"p"},"index.js")," in your favorite editor. This file contains a simple new core node, let's look at the different sections:"),(0,r.kt)("p",null,"First you must import the Noodl SDK."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const Noodl = require('@noodl/noodl-sdk');\n")),(0,r.kt)("p",null,"Next you will define the code for the new node. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const MyFullNameNode = Noodl.defineNode({\n  category: 'My Utils',\n  name: 'Full Name',\n  inputs: {\n    FirstName: 'string',\n    LastName: 'string',\n  },\n  outputs: {\n    FullName: 'string',\n  },\n  changed: {\n    FirstName: function () {\n      this.setOutputs({\n        FullName: this.inputs.FirstName + ' ' + this.inputs.LastName,\n      });\n    },\n    LastName: function () {\n      this.setOutputs({\n        FullName: this.inputs.FirstName + ' ' + this.inputs.LastName,\n      });\n    },\n  },\n});\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You need to specify the ",(0,r.kt)("strong",{parentName:"li"},"name")," of the node, this is the name that shows up in the list when creating new nodes."),(0,r.kt)("li",{parentName:"ul"},"you can optionally specify a ",(0,r.kt)("strong",{parentName:"li"},"category"),", this will also be used in the new node popup in Noodl.")),(0,r.kt)("p",null,"Finally you need to define the specification of your module."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Noodl.defineModule({\n  nodes: [MyFullNameNode],\n  setup() {\n    //this is called once on startup\n  },\n});\n")),(0,r.kt)("p",null,"In this simple template we provide our new node as part of the module."),(0,r.kt)("p",null,"Now if you make a change to your code you either need to run the ",(0,r.kt)("em",{parentName:"p"},"npm build")," command in the ",(0,r.kt)("em",{parentName:"p"},"module")," folder as shown about, or if you are running the ",(0,r.kt)("em",{parentName:"p"},"npm run dev")," it will automatically detect the change and rebuild your module."),(0,r.kt)("p",null,"You need to reload the viewer in Noodl for the changes to appear. Use ",(0,r.kt)("em",{parentName:"p"},"Cmd/Ctrl-R")," or the refresh button at the top of the viewer."),(0,r.kt)("h2",{id:"documentation"},"Documentation"),(0,r.kt)("p",null,"It is important to document your module so that your fellow Noodlers will know how to use it. Once you have your documentation hosted somewhere, where it is accessible to the users of your module, you can add a docs link as shown below."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'noodl-cli desc --docs "https://url.to.my/docs"\n')),(0,r.kt)("p",null,"Now after you push your module the documentation will be accessible via the ",(0,r.kt)("em",{parentName:"p"},"Docs")," button from the library panel in Noodl."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(55984).Z,width:"1608",height:"428"})))}m.isMDXComponent=!0},87227:function(e,t,n){t.Z=n.p+"assets/images/access-key-06575106110648c528ae16536857951c.png"},43959:function(e,t,n){t.Z=n.p+"assets/images/fullname-tests-7e1dcd0f9237bb15d3bc766cfd53458b.png"},15691:function(e,t,n){t.Z=n.p+"assets/images/import-project-9fbcd9ed72f512e3d01d0c2087e6b4cf.png"},55984:function(e,t,n){t.Z=n.p+"assets/images/library-pane-53fdb96ab566a526787b6cd9055d9f1a.png"},55735:function(e,t,n){t.Z=n.p+"assets/images/manage-workspace-7e8567f8e4615aedaff391e01c340986.png"},74493:function(e,t,n){t.Z=n.p+"assets/images/pick-project-folder-178cbe92028a302599bfee1b21e37a4f.png"}}]);