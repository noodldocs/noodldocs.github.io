"use strict";(self.webpackChunknoodl_docs=self.webpackChunknoodl_docs||[]).push([[7219],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),d=p(n),h=i,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||a;return n?o.createElement(m,l(l({ref:t},c),{},{components:n})):o.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,l=new Array(a);l[0]=h;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[d]="string"==typeof e?e:i,l[1]=r;for(var p=2;p<a;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8071:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>p,toc:()=>d});var o=n(87462),i=(n(67294),n(3905)),a=n(17213),l=n(44996);const r={title:"Interacting with the Mapbox Module",hide_title:!0},s="Interacting with the Mapbox Module",p={unversionedId:"modules/mapbox/guides/interacting/README",id:"modules/mapbox/guides/interacting/README",title:"Interacting with the Mapbox Module",description:"What you will learn in this guide",source:"@site/library/modules/mapbox/guides/interacting/README.md",sourceDirName:"modules/mapbox/guides/interacting",slug:"/modules/mapbox/guides/interacting/",permalink:"/2.8/library/modules/mapbox/guides/interacting/",draft:!1,tags:[],version:"current",frontMatter:{title:"Interacting with the Mapbox Module",hide_title:!0},sidebar:"mapboxSidebar",previous:{title:"Directions API with the Mapbox Module",permalink:"/2.8/library/modules/mapbox/guides/directions-api/"},next:{title:"Using Markers",permalink:"/2.8/library/modules/mapbox/guides/using-markers/"}},c={},d=[{value:"What you will learn in this guide",id:"what-you-will-learn-in-this-guide",level:2},{value:"Overview",id:"overview",level:2},{value:"Getting the position that the user clicked",id:"getting-the-position-that-the-user-clicked",level:2},{value:"Tracking Map Movement",id:"tracking-map-movement",level:2}],u={toc:d},h="wrapper";function m(e){let{components:t,...r}=e;return(0,i.kt)(h,(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"interacting-with-the-mapbox-module"},"Interacting with the Mapbox Module"),(0,i.kt)("h2",{id:"what-you-will-learn-in-this-guide"},"What you will learn in this guide"),(0,i.kt)("p",null,"This guide will teach you how to implement basic interactions with your Mapbox map using the Mapbox Module."),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"If you haven't already looked at the guide for setting up the Mapbox Module, it's recommended to recommended to do that before starting this guide. You can find it ",(0,i.kt)("a",{parentName:"p",href:"/library/modules/mapbox/guides/setting-up"},"here"),"."),(0,i.kt)("p",null,"We will go though the following steps:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Getting the latitude and longitude of the position a user clicked on the map."),(0,i.kt)("li",{parentName:"ul"},"Detecting when a user moves the map.")),(0,i.kt)("p",null,"There is also a video walking through the guide."),(0,i.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube-nocookie.com/embed/oDGEKKvlD74",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),(0,i.kt)("h2",{id:"getting-the-position-that-the-user-clicked"},"Getting the position that the user clicked"),(0,i.kt)("p",null,"If we start out with the same super simple app as in the previous guide we can start adding some interactions to it."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(38170).Z,width:"2045",height:"1100"}))),(0,i.kt)("p",null,'Let\'s first remove the "Hello World"-text. Instead we replace it with a panel. We will build it using a ',(0,i.kt)("a",{parentName:"p",href:"/nodes/basic-elements/group"},"Group")," node. So add a ",(0,i.kt)("strong",{parentName:"p"},"Group"),' node at the bottom of the node hierarchy. Name it "Popup Panel" for readability.'),(0,i.kt)("div",{className:"ndl-image-with-background"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(8453).Z,width:"595",height:"475"}))),(0,i.kt)("p",null,"We want it to float on top of the MapboxMap so change it's ",(0,i.kt)("strong",{parentName:"p"},"Position")," to ",(0,i.kt)("strong",{parentName:"p"},"Absolute"),". Center it and dock it to the bottom using the ",(0,i.kt)("strong",{parentName:"p"},"Layout")," controls. Set a size of 300 pixels wide and 100 pixels high for now. Give it a bottom margin of 20 pixels to give it some space."),(0,i.kt)("div",{className:"ndl-image-with-background s"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(45836).Z,width:"675",height:"1910"}))),(0,i.kt)("p",null,'Also make it white, with rounded corners of 10 pixels and a 2 pixel outline of a dark grey color. Also tick "Shadow Enabled" to make it a little nicer visually.'),(0,i.kt)("div",{className:"ndl-image-with-background s"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(65507).Z,width:"680",height:"1435"}))),(0,i.kt)("p",null,"Now you should have a panel floating on top of the map."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(23866).Z,width:"1657",height:"1210"}))),(0,i.kt)("p",null,"We want to print out the geographical location in the panel, i.e. the latitude and longitude of the position the user clicks."),(0,i.kt)("p",null,'Add two text nodes in the panel. Adjust the padding (horizontally and vertically) of the "Popup Panel" to 10 pixels to give the text some space.'),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(84737).Z,width:"2362",height:"1302"}))),(0,i.kt)("p",null,'Then connect the two outputs "Longitude" and "Latitude" to the respective text. ',(0,i.kt)("em",{parentName:"p"},'Make sure it\'s the one under "Mapped Clicked" Section')," since there are two other similarly named outputs that holds the current panning position of the map."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(22425).Z,width:"1662",height:"1290"}))),(0,i.kt)("p",null,"Now try clicking around in the map. You should see the two texts updating whenever you click."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(32729).Z,width:"1940",height:"1735"}))),(0,i.kt)("h2",{id:"tracking-map-movement"},"Tracking Map Movement"),(0,i.kt)("p",null,"Now let's add some behavior to the panel. We want it to appear from the bottom when the user clicks on the map. Then, when the user starts panning or zooming in the map. To do this we are going to use the ",(0,i.kt)("strong",{parentName:"p"},"Click")," and ",(0,i.kt)("strong",{parentName:"p"},"Map Moved")," signals."),(0,i.kt)("p",null,"First add a ",(0,i.kt)("a",{parentName:"p",href:"/nodes/utilities/logic/states"},"States"),' node that will hold the current state of the panel. Add the states "Off Screen" and "On Screen". Create a value to control in the state, lets call it "Y Position". This is the value that will control the Y position of the panel. It will be 120 when the panel is "Off Screen" (i.e. it will be below the screen). Then it will be 0 when the panel is "On Screen", i.e. it will be back at the bottom of the screen.'),(0,i.kt)("div",{className:"ndl-image-with-background"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(13353).Z,width:"687",height:"2165"}))),(0,i.kt)("p",null,"Finally hook up the outputs ",(0,i.kt)("strong",{parentName:"p"},"Click")," and ",(0,i.kt)("strong",{parentName:"p"},"Map Moved"),' signal to change the state between "On Screen" and "Off Screen". Feed back the output "Y Position" to the ',(0,i.kt)("strong",{parentName:"p"},"Pos Y")," of the panel."),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("p",null,(0,i.kt)("img",{src:n(49089).Z,width:"1545",height:"1132"}))),(0,i.kt)("p",null,"Now you should be able to move around and click on the map, showing and hiding the panel printing the longitude and latitude."),(0,i.kt)("p",null,'If you want to import the final project, click the "Import" button below and follow the instructions.'),(0,i.kt)("div",{className:"ndl-image-with-background l"},(0,i.kt)("img",{src:(0,l.Z)("/library/modules/mapbox/guides/interacting/final-result.gif"),className:"ndl-image large"}),(0,i.kt)(a.Z,{zip:"interacting.zip",name:"Mapbox Interactions",thumb:"screen-2.png",mdxType:"ImportButton"})))}m.isMDXComponent=!0},17213:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(67294),i=n(39671);function a(e){let{zip:t,name:n,thumb:a,cf:l}=e;return o.createElement("button",{className:"ndl-import-button",onClick:()=>(0,i.I)(t,{name:n,thumb:a,cf:l})})}},39671:(e,t,n)=>{n.d(t,{I:()=>i});var o=n(36809);function i(e,t){let n=[];t&&void 0!==t.name&&n.push("name="+encodeURIComponent(t.name)),t&&void 0!==t.thumb&&n.push("thumb="+encodeURIComponent(location.protocol+"//"+location.host+o.default.baseUrl+t.thumb)),t&&void 0!==t.cf&&n.push("cf="+encodeURIComponent(location.protocol+"//"+location.host+o.default.baseUrl+"/"+t.cf));var i="noodl:import/"+location.protocol+"//"+location.host+o.default.baseUrl+e+(n.length>0?"?"+n.join("&"):"");console.log("Importing into Noodl:",i),console.log(e),window.location.href=i}},22425:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/connection-1-ced03a49117b0ed17d2338dd3a9c9643.png"},38170:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/initial-state-63d75052cf9420661c8ed9f852396bdc.png"},8453:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/nodes-1-6bcabd0f913fa6d997a11b476e364a5a.png"},49089:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/nodes-2-4af235bb7ce424438c0f65c86288f102.png"},45836:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/popup-panel-1-151c38e611df0f45d591558b3b6b4e35.png"},65507:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/popup-panel-2-595f146c89f3735289706436c45618e0.png"},23866:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/screen-1-03941f209a733914c34b43f567812fe0.png"},32729:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/screen-2-d01b7229549fd4f021cc91ff8bf3c688.png"},84737:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/state-2-0e42e9b6207138e475b34f028bf2facc.png"},13353:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/states-panel-1-2644be253ee1568a7422a1bc84b3bd68.png"}}]);