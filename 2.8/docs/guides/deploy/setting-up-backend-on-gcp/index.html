<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/deploy/setting-up-backend-on-gcp">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="Noodl" href="/2.8/opensearch.xml">
<link rel="alternate" type="application/json" href="/2.8/whats-new/feed.json" title="Noodl JSON Feed">
<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-P4LSJL4",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager --><title data-rh="true">Setting up a backend on Google Cloud Platform | Noodl</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.noodl.net/2.8/docs/guides/deploy/setting-up-backend-on-gcp"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:image" content="https://docs.noodl.net/noodl-docs.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Setting up a backend on Google Cloud Platform | Noodl"><meta data-rh="true" name="description" content="This guide will cover how to start up a Noodl backend on GCP using the Noodl backend docker image. You will need a GCP account setup. The service you will be using is called Cloud Run. Start by going to the console for that service."><meta data-rh="true" property="og:description" content="This guide will cover how to start up a Noodl backend on GCP using the Noodl backend docker image. You will need a GCP account setup. The service you will be using is called Cloud Run. Start by going to the console for that service."><link data-rh="true" rel="icon" href="/2.8/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.noodl.net/2.8/docs/guides/deploy/setting-up-backend-on-gcp"><link data-rh="true" rel="alternate" href="https://docs.noodl.net/2.8/docs/guides/deploy/setting-up-backend-on-gcp" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.noodl.net/2.8/docs/guides/deploy/setting-up-backend-on-gcp" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://D29X2LNM4J-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/2.8/assets/css/styles.4031965f.css">
<link rel="preload" href="/2.8/assets/js/runtime~main.cdb8172a.js" as="script">
<link rel="preload" href="/2.8/assets/js/main.6590a969.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/2.8/"><div class="navbar__logo"><img src="/2.8/img/logo.svg" alt="Noodl Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/2.8/img/logo.svg" alt="Noodl Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Docs</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/2.8/docs/learn">Learn</a><a class="navbar__item navbar__link" href="/2.8/nodes/overview">Node reference</a><a class="navbar__item navbar__link" href="/2.8/library/overview">Library</a><a class="navbar__item navbar__link has-divider" href="/2.8/javascript/overview">Javascript</a><a href="https://discord.com/invite/23xU2hYrSJ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link is-discord">Discord</a><a href="https://console.noodl.net/#/signup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link is-download-button">Download</a><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><main class="docMainContainer_TCnq docMainContainerEnhanced_WDCb"><div class="container padding-top--md padding-bottom--lg"><div class="Root_noPZ"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="theme-doc-markdown markdown"><h1>Setting up a backend on Google Cloud Platform</h1><p>This guide will cover how to start up a Noodl backend on GCP using the Noodl backend docker image. You will need a GCP account setup. The service you will be using is called <strong>Cloud Run</strong>. Start by going to the console for that service.</p><div class="ndl-image-with-background m"><p><img loading="lazy" src="/2.8/assets/images/gcp-1-2f15917cc5859b8dbda19db8f0f69e1d.png" width="644" height="176" class="img_E7b_"></p></div><p>There you can create a new service. Find the button <strong>Create Service</strong> at the top.</p><p>When setting up the new service you need provide the url to the Noodl backend docker image.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/gcp-2-d9f2f744b891321907cb6b287b3dd1d5.png" width="1114" height="200" class="img_E7b_"></p></div><p>The image URL to use is:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcr.io/noodlapp/noodl-self-hosted-cloud-services:latest</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Another important setting is making sure that unauthenticated requests can be handled by your new service.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/gcp-3-5e5bf9b376a1e0c18ac8c603e63fe092.png" width="1112" height="264" class="img_E7b_"></p></div><p>For the most part you can keep the standard settings but a few needs to be changed. These can be found by expanding the <strong>Container, Connections, Security</strong> section.</p><ul><li><strong>Continer port</strong> The port of the application needs to be set to <strong>3000</strong></li></ul><p>You also need to provide a few environment variables to the instance. You do this using the <strong>+ Add Variable</strong> button.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/gcp-4-c6413201d801ff6062767ca6c7487d93.png" width="1152" height="370" class="img_E7b_"></p></div><p>The following variables are needed:</p><ul><li><p><strong>APP_ID</strong> You can choose this yourself, you need to provide it in the Noodl editor when connecting to your backend.</p></li><li><p><strong>MASTER_KEY</strong> This you be a password that you need to keep safe. With this password you get full access to your backend, this is also needed to connect to your backend from Noodl.</p></li><li><p><strong>DATABASE_URI</strong> This is the database uri that you got when setting up the MongoDB database in the previous step. This can also be a Postgres uri.</p></li><li><p><strong>PUBLIC_SERVER_URL</strong> (Optional) This is needed if you want to support file uploads and downloads, in that case you might need to go back here and update this environment variable after you have received the URL in the next step. This variable should be the public url where your clour services can be reached, starting with <code>https://</code>.</p></li></ul><p>With that in place you can create your new service, hit the <strong>Create</strong> button.</p><p>Once the service is up and running the last step is to find the URL of the service. You can find it by navigating to the service details page. </p><div class="ndl-image-with-background l"><p><img loading="lazy" src="/2.8/assets/images/gcp-5-a354a0f59e578a22ff96741bb9e59937.png" width="736" height="106" class="img_E7b_"></p></div><p>With that URL, master key and app id in hand, <a href="/2.8/docs/guides/deploy/using-an-external-backend#connect-your-application-to-the-self-hosted-backend">go back</a> to the self hosting guide.</p><h1>File storage</h1><p>If you want to support file upload and download, you need to specify the <strong>PUBLIC_SERVER_URL</strong> environment variable as noted above. By default the files will be stored in the database of your application, but if you instead want to use a GCS bucket for storage you can provide the following environment variables.</p><ul><li><strong>GCP_PROJECT_ID</strong> The project ID from the Google Developer’s Console. Required.</li><li><strong>GCS_BUCKET</strong> The name of your GCS bucket. Required.</li><li><strong>GCP_CLIENT_EMAIL</strong> The client email of the service account with permissions to the bucket.</li><li><strong>GCP_PRIVATE_KEY</strong> The private key associated with the client email for the servive account with permissions to the bucket.</li><li><strong>GCS_BUCKET_PREFIX</strong>	(Optional) Create all the files with the specified prefix added to the filename. Can be used to put all the files for an app in a folder with ‘folder/’.</li><li><strong>GCS_DIRECT_ACCESS</strong>	(Optional) Whether reads are going directly to GCS or proxied through your Parse Server. Default: false</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></div></main></div></div></div>
<script src="/2.8/assets/js/runtime~main.cdb8172a.js"></script>
<script src="/2.8/assets/js/main.6590a969.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P4LSJL4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>