<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/cloud-logic/email-verification">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="Noodl" href="/2.8/opensearch.xml">
<link rel="alternate" type="application/json" href="/2.8/whats-new/feed.json" title="Noodl JSON Feed">
<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-P4LSJL4",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager --><title data-rh="true">Emal Verification | Noodl</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.noodl.net/2.8/docs/guides/cloud-logic/email-verification"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:image" content="https://docs.noodl.net/noodl-docs.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Emal Verification | Noodl"><meta data-rh="true" name="description" content="Cloud functions play an important role when creating different log in and sign up flows. Using the nodes Sign Up, Log In and Log Out you can create the most basic flow that will have the user sign up with a username, optionally email, and password and log in with username and password."><meta data-rh="true" property="og:description" content="Cloud functions play an important role when creating different log in and sign up flows. Using the nodes Sign Up, Log In and Log Out you can create the most basic flow that will have the user sign up with a username, optionally email, and password and log in with username and password."><link data-rh="true" rel="icon" href="/2.8/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.noodl.net/2.8/docs/guides/cloud-logic/email-verification"><link data-rh="true" rel="alternate" href="https://docs.noodl.net/2.8/docs/guides/cloud-logic/email-verification" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.noodl.net/2.8/docs/guides/cloud-logic/email-verification" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://D29X2LNM4J-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/2.8/assets/css/styles.4031965f.css">
<link rel="preload" href="/2.8/assets/js/runtime~main.cb899bad.js" as="script">
<link rel="preload" href="/2.8/assets/js/main.da70cc2b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/2.8/"><div class="navbar__logo"><img src="/2.8/img/logo.svg" alt="Noodl Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/2.8/img/logo.svg" alt="Noodl Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Docs</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/2.8/docs/learn">Learn</a><a class="navbar__item navbar__link" href="/2.8/nodes/overview">Node reference</a><a class="navbar__item navbar__link" href="/2.8/library/overview">Library</a><a class="navbar__item navbar__link has-divider" href="/2.8/javascript/overview">Javascript</a><a href="https://forum.noodl.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum</a><a href="https://discord.com/invite/23xU2hYrSJ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link is-discord">Discord</a><a href="https://console.noodl.net/#/signup" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link is-download-button">Download</a><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><div class="search-bar-outer"><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/2.8/docs/learn">Learn</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/2.8/docs/getting-started/overview">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/getting-started/workflow">Workflow Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/getting-started/fundamentals">Fundamentals</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/2.8/docs/guides/user-interfaces/basics">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/2.8/docs/guides/user-interfaces/basics">Building User Interfaces</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/2.8/docs/guides/data/making-connections">Working with data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/2.8/docs/guides/navigation/basic-navigation">Navigation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/2.8/docs/guides/cloud-data/creating-a-backend">Working with cloud data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/2.8/docs/guides/business-logic/client-side-biz-logic-nodes">Building business logic</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/2.8/docs/guides/cloud-logic/introduction">Cloud Functions</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/guides/cloud-logic/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/2.8/docs/guides/cloud-logic/email-verification">Email Verification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/guides/cloud-logic/scheduled-jobs">Scheduled Jobs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/guides/cloud-logic/logging">Logging and Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/guides/cloud-logic/javascript">Javascript</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/2.8/docs/guides/collaboration/version-control">Collaboration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/2.8/docs/guides/deploy/deploying-an-app-on-sandbox">Deploying and hosting apps</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/2.8/docs/build-alongs/overview">Build Along Videos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Build Along Videos&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/build-alongs/task-list-app">Task List app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/build-alongs/survey-app">Custom Survey app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/build-alongs/star-rating-component">Star Rating component</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/2.8/docs/build-alongs/horizontal-list-with-snapping">Horizontal snapping list</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="Root_noPZ"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Email Verification</h1><p>Cloud functions play an important role when creating different log in and sign up flows. Using the nodes <a href="/2.8/nodes/data/user/sign-up">Sign Up</a>, <a href="/2.8/nodes/data/user/log-in">Log In</a> and <a href="/2.8/nodes/data/user/log-out">Log Out</a> you can create the most basic flow that will have the user sign up with a username, optionally email, and password and log in with username and password.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>It&#x27;s common to use email for both <strong>username</strong> and <strong>email</strong> when signing up, so you only ask the user for email and password, one less thing to remeber right.</p></div></div><p>Once logged in you can use the <a href="/2.8/docs/guides/cloud-data/access-control">Access Control</a> functions of the cloud database to control what a user has access to and not. The built in role system will allow you to create features like teams/groups of users.</p><p>This is a great way to get started and focus on building your application. But once you start getting to the point where you want to expose it to more users often you need a more solid sign up and log in flow. The first addition is likely the need to verify the email of users and allow them to reset the password and this is what we will cover in this guide.</p><p>There is a project template that contains a more complete sign up and log in flow that also covers sending emails to users on sign up, editing the profile etc, and it uses cloud functions to do some of these things that cannot be performed from the frontend for security reasons (cloud functions always have full access to the database).</p><p>You can either start a new project from the template, or you can import the cloud functions into your existing project. We will review them here in this guide, case by case.</p><div class="ndl-image-with-background l"><p><img loading="lazy" src="/2.8/assets/images/signup-template-15cd4d1a6d6fce354bcefb13224db64b.png" width="760" height="690" class="img_E7b_"></p></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="settings">Settings<a class="hash-link" href="#settings" title="Direct link to heading">​</a></h2><p>In order to make the email verification process work there are a few configuration parameters that need to be provided. This is done by opening up the dashboard for your <strong>Cloud Serivce</strong> and navigating to the <strong>Config</strong> tab using the sidebar. You can learn more about config parameters by looking at the <a href="/2.8/nodes/data/cloud-data/config">Config</a> node. The configuration parameters you need a are shown below:</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/settings-57b7bccf9cb884ef40b4cc240596d010.png" width="1960" height="306" class="img_E7b_"></p></div><ul><li><code>EmailVerificationDomain</code> Here you need to enter the domain where your application is deployed starting with <code>https://</code>. This is used for the links in the verification emails. When running locally this will automatically be <code>http://localhost:8574</code>, this is where the local Noodl web server is running.</li><li><code>EmailVerificationFrom</code> This is where you put the email address that should be used as the &quot;from&quot; email when sending verification emails to users. It&#x27;s important that this is a valid email with <strong>Send Grid</strong> (the email sending service we use for the application).</li><li><code>SendGridAPIKey</code> The project template and email verification prefabs use <a href="https://sendgrid.com/" target="_blank" rel="noopener noreferrer">SendGrid</a> as an email service, to use it you need to sign up and get an account (it&#x27;s free to test). Then create an API Key and put it in the config. More info on how to use Send Grid with Noodl can be found <a href="/2.8/library/prefabs/sendgrid">here</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="signing-up">Signing up<a class="hash-link" href="#signing-up" title="Direct link to heading">​</a></h2><p>Signing up is done with the <a href="/2.8/nodes/data/user/sign-up">Sign Up</a> action node. After the user has successfully signed up the cloud function <strong>Send Verification Email</strong> is called. This function will send an email to the address provided by the user.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/sign-up-1-17865ab4ce36b2f70baf6cecd14e46e9.png" width="1718" height="992" class="img_E7b_"></p></div><p>Let&#x27;s take a closer look at the cloud function. There is no need to dive into the details but it&#x27;s good to review the main flow and blocks. The cloud function is found in the cloud function tab, in the <strong>Sign Up</strong> folder, it&#x27;s called <strong>Send Verification Email</strong>. The first this when the function is started is that a <strong>Request Email Verification</strong> action component is used.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/sign-up-2-020e1d4b27e1c2cc4d910816afbe4960.png" width="1422" height="910" class="img_E7b_"></p></div><p>This action create a secret token (a random string of characters, sort of a temporary password) that it stores with the current user. This token will later be sent to the user as part of an email. If the email is already verified a signal will be emitted on <strong>Email Is Verified</strong> which we will return as an error result for the cloud function.</p><p>The next part is actually sending the email to the user. This is done in the function with the <strong>Format Email</strong> and <strong>Send Email</strong> action components.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/sign-up-3-e22cedf8db53eb32a90d32f5a321c47d.png" width="1008" height="530" class="img_E7b_"></p></div><p>The <strong>Format Email</strong> action takes as input the verification token and the email of the user and creates an email with a link. You can look at the properties of the <strong>Format Email</strong> node to see the content of the email.</p><div class="ndl-image-with-background l"><p><img loading="lazy" src="/2.8/assets/images/sign-up-4-bf4d759cca940264554b8b8503eedf2f.png" width="760" height="354" class="img_E7b_"></p></div><p>As you can see it creates an email containing an HTML link, this link uses some fancy template syntax.</p><ul><li><strong>$Domain</strong> This will be replaced by the format email node to the domain where your application is deployed, so that the link will take you back to the app. More on this later.</li><li><strong>{Token}</strong> This is the generated token from before.</li><li><strong>{Email}</strong> This is the email for the user, it will be used to fetch the user and marked the email as verified in the next step.</li></ul><p>The <strong>Format Email</strong> node outputs the final email with the correct values for the above placeholders insterted. This email content is then sent to the <strong>Send Email</strong> node that actually sends the email to the user. </p><div class="ndl-image-with-background l"><p><img loading="lazy" src="/2.8/assets/images/sign-up-5-bf0a3f3d5d4099bcc2451c2652204f98.png" width="976" height="770" class="img_E7b_"></p></div><p>That&#x27;s it. Now the user should have a fresh email with the subject <strong>Email Verification!</strong> in it&#x27;s inbox. You can edit the <strong>Subject</strong> property of the <strong>Send Email</strong> action.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="verifyng-the-email">Verifyng the email<a class="hash-link" href="#verifyng-the-email" title="Direct link to heading">​</a></h2><p>We need one more thing in place for the email verification flow to work. We need the page that the link in the verification email points to. After the <strong>Format Email</strong> action have formatted the email template and inserted the <strong>Token</strong>, <strong>Email</strong> and <strong>Domain</strong> the resulting link will look something like this.</p><p><code>&lt;a href=&quot;https://your-app.sandbox.noodl.app/verify-email?token=abc&amp;email=user@email.com&quot;&gt;verify&lt;/a&gt;</code></p><p>This little thing will send the user back to your app (remember you can use <code>http://localhost:8574</code> as domain for testing, before your app is deployed) and specifically to the page <code>/verify-email</code>. So, let&#x27;s take a look at the page in the project template.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/verify-email-1-faad07be3e8ac8eedcc96c03052d30e3.png" width="1808" height="944" class="img_E7b_"></p></div><p>There is a lot of stuff here but the important things is the <strong>Page Inputs</strong> where we get the <strong>Token</strong> and <strong>Email</strong> as part of the query parameters in the link (the stuff after the <code>?</code> in the link), these are passed to the <strong>Sign Up / Verify Email</strong> cloud function that is called as soon as the page is loaded with the <strong>Did Mount</strong> signal.</p><p>If it succeeds, the email was verified and the user is sent to the log in page of the app with the <strong>Navigate</strong> node and a toast message is shown. If it fails, a message is displayed on the screen and a toast is shown using the <strong>Show Toast</strong> component (you can find this among the prefabs and install it into your project, same for the <strong>Loading Spinner</strong>).</p><p>Once logged in to your app you can inspect the user object by hovering over any <strong>User</strong> node. Here you can see some properties that have been set by the email verification cloud functions.</p><div class="ndl-image-with-background l"><p><img loading="lazy" src="/2.8/assets/images/verify-email-2-0c5d11fed1967cea0f515c9c58299f19.png" width="764" height="698" class="img_E7b_"></p></div><p>The most important is the <strong>emailVerified</strong> property of the user, this indicates if the user have verified their email of not. In the sign up project template the user is actually send to the home screen of the app even if the email address is not verfied and a banner is shown. You could for instance only enable certain parts of the application if the user have verified their email.</p><p>If the email was not received properly of if the user would like to have another verification email sent you can simply call the <strong>Sign Up / Send Verification Email</strong> cloud function again.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you update the email with the <strong>Set User Properties</strong> action node, it will automatically switch the <strong>emailVerified</strong> property of the user to false.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="reset-password">Reset Password<a class="hash-link" href="#reset-password" title="Direct link to heading">​</a></h2><p>Resetting a user password when it&#x27;s been lost follows the same pattern as sending an email for verification. First you need to present some sort of UI where the user can enter their email address to recover their password.</p><div class="ndl-image-with-background l"><p><img loading="lazy" src="/2.8/assets/images/reset-password-1-febc05010706aa49fdce5f4619d10e78.png" width="880" height="644" class="img_E7b_"></p></div><p>There is a function called <strong>Sign Up / Request Password Reset</strong> that simply accepts an <strong>Email</strong> and it can be called without the user being logged in. </p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/reset-password-2-79045cdca35a317964da8534d57d9f39.png" width="1058" height="520" class="img_E7b_"></p></div><p>The cloud function follow pretty much the same pattern as when sending email verifications. It will send an email to the user with a link containing a secret token just like when veryfing the email address.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/reset-password-3-f154724ee794a8a59fad7e835d05f7e6.png" width="1510" height="718" class="img_E7b_"></p></div><p>The <strong>Request Password Reset</strong> action will generate the secret token which is passed to the <strong>Format Email</strong> along with the users email. This time it will generate a link to a page called <code>/reset-password</code>. You can edit the content of the email in the <strong>Format Email</strong> node.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/reset-password-4-f1efc4e317f5c2315752e77c4bf88371.png" width="746" height="234" class="img_E7b_"></p></div><p>The resulting link will look something like this:</p><p><code>&lt;a href=&quot;https://your-app.sandbox.noodl.app/reset-password?token=abc&amp;email=user@email.com&quot;&gt;link&lt;/a&gt;</code></p><p>The link will take the user to the <code>/reset-password</code> page which can contain a <strong>Text Input</strong> where the user can provide the new password.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/reset-password-6-226403f0ac6e03a25f04f9d15779f6dd.png" width="874" height="620" class="img_E7b_"></p></div><p>When the user hits the reset button we will call the <strong>Sign Up / Reset Password</strong> cloud function by supplying the secret token and user email that is received via the query parameters of the link and the <strong>Page Inputs</strong> node.</p><div class="ndl-image-with-background xl"><p><img loading="lazy" src="/2.8/assets/images/reset-password-5-5ab4fc013361523677751d194ac49e57.png" width="1618" height="1052" class="img_E7b_"></p></div><p>Provided that the secret token is correct and have not expired (tokens are valid for 24 hours) the password will be updated. You can then send the user back to the <strong>Log In</strong> page.</p><p>That&#x27;s it, this is how you use cloud functions to create an email verification and password reset flow. You will use cloud functions for a lot of user management tasks that need to be performed on the backend with full database access.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/2.8/docs/guides/cloud-logic/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction to Cloud Functions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2.8/docs/guides/cloud-logic/scheduled-jobs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scheduled Jobs</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#settings" class="table-of-contents__link toc-highlight">Settings</a></li><li><a href="#signing-up" class="table-of-contents__link toc-highlight">Signing up</a></li><li><a href="#verifyng-the-email" class="table-of-contents__link toc-highlight">Verifyng the email</a></li><li><a href="#reset-password" class="table-of-contents__link toc-highlight">Reset Password</a></li></ul></div></div></div></div></div></main></div></div></div>
<script src="/2.8/assets/js/runtime~main.cb899bad.js"></script>
<script src="/2.8/assets/js/main.da70cc2b.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P4LSJL4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>